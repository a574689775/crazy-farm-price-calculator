# 疯狂农场价格计算器 - 产品需求文档（PRD）

**文档版本**：2.0  
**产品名称**：疯狂农场价格计算器（fknc.top）  
**目标产品**：《蛋仔派对》疯狂农场玩法  
**最后更新**：基于完整项目梳理，仅描述产品与交互，不含技术实现

---

## 一、产品概述

### 1.1 产品定位

面向《蛋仔派对》「疯狂农场」玩法的**在线价格计算工具**。用户登录后选择作物、输入重量与突变组合即可得到作物售价；支持按价格反推重量、查看计算历史、分享链接与提交价格反馈。未开通会员时每日可免费使用计算器 1 次，会员不限次数。

### 1.2 目标用户

- 玩疯狂农场的蛋仔玩家  
- 需要快速查价、比价、反推重量或记录搭配的用户  
- 运营方（通过用户价格反馈与反馈数据页做基数校准，提升长期准确率）

### 1.3 核心价值

- **算价准确**：基于游戏公式（基础系数 × 先天突变 × 重量^1.5 × (天气突变和+1) × 异形突变）计算价格，并支持根据用户反馈校准基数。  
- **体验顺畅**：作物按当日热度排序、突变分组清晰、支持历史回填与分享复现。  
- **可校准**：用户可标记计算结果是否准确、填写实际价格；反馈数据页可查看单作物/全部作物的最优基数与准确率，用于产品迭代。

### 1.4 访问与合规

- **正式地址**：https://fknc.top（推荐）、https://www.fknc.top  
- **备案与声明**：页脚展示 ICP、公安备案号；产品内提供免责声明、用户隐私说明，登录/注册前需同意后使用。

---

## 二、功能架构与用户流程

### 2.1 功能总览

| 模块           | 功能简述                                     | 是否需登录 |
|----------------|----------------------------------------------|------------|
| 登录/注册      | 邮箱验证码登录、注册、找回密码；可选填邀请码 | 否（使用前需登录） |
| 作物选择       | 月球/普通分类、按当日热度排序、热度角标      | 是         |
| 价格计算       | 重量+突变→价格；价格→反推重量；生长时间预估 | 是         |
| 计算历史       | 本地最近 20 条，从历史回填到计算器          | 是         |
| 分享           | 生成带参数的短链，他人打开可复现作物+重量+突变 | 是       |
| 价格反馈       | 标记是否准确、可选填实际价格                 | 是         |
| 反馈数据页     | 按作物筛选、单作物/一键全部最优基数、准确率与误差 | 是（通过 URL 进入） |
| 会员与激活码   | 日/周/月/季/年/三年卡、购买后激活码激活与续费 | 是        |
| 免费次数       | 未开通会员时每日 1 次进入计算器（按北京时间） | 是        |
| 邀请有礼       | 邀请码、好友首充后获得会员天数、我的邀请统计 | 是         |
| 排行榜         | 会员时长榜、今日查询榜                       | 是         |
| 个人中心       | 昵称与头像、会员状态、计算历史/邀请/排行榜/联系/声明/隐私/更新日志/退出 | 是 |

### 2.2 用户流程概览

```
访问 fknc.top
    → 未登录：仅展示登录页（无会员入口）
    → 已登录：进入「作物选择」页
        → 首次进入选择页：自动弹出「邀请有礼」弹窗（仅一次，关闭后可从个人中心再打开）
        → 点击「个人中心」：打开侧边抽屉（昵称/头像、会员、计算历史、邀请有礼、排行榜、联系我们、免责声明、用户隐私、更新日志、退出登录）
        → 选择作物进入「计算器」：扣免费次数或使用会员权益
        → 计算器内：输入重量与突变 → 查看价格 / 点击价格切换为「按价格反推重量」
        → 可提交价格反馈、保存到历史、生成分享链接
        → 从个人中心进入「计算历史」：点击某条记录回填到计算器（再次占用免费次数或会员）
    → 通过 URL ?page=feedback 进入「反馈数据页」：筛选作物、查看/计算最优基数、删除单条反馈、一键计算全部
    → 页脚：仅展示备案号等合规信息；会员/联系/更新日志/免责声明等通过个人中心入口打开对应弹窗
```

---

## 三、功能详细说明

### 3.1 登录与账号

- **方式**：邮箱 + 验证码（发送验证码到邮箱，输入验证码完成登录或注册）。支持注册、登录、找回密码。  
- **注册**：可选填邀请码，用于绑定邀请关系（与「邀请有礼」奖励相关）。  
- **登录前**：需勾选同意《免责声明》和《用户隐私》；登录页不展示会员入口与备案区以外的链接。  
- **登录后**：会话保持；未设置昵称时由系统分配随机昵称，用户可在个人中心修改昵称与头像。

### 3.2 作物选择页

- **分类**：作物分为「月球作物」与「普通作物」两类，分别成块展示。  
- **排序**：每类内部按「当日查询次数」热度排序，热度高的排在前；同热度时按数据顺序（品质等）排。  
- **热度展示**：每个作物卡片上显示当日被查询次数，次数越多角标颜色越深（如浅橙到深红），热度变化时角标有短暂抖动动效。  
- **展示内容**：作物图片、作物名称；月球作物区块旁有「个人中心」按钮。  
- **交互**：点击作物进入价格计算器；进入前校验免费次数或会员状态，次数用尽时弹窗引导开通会员或邀请好友。  
- **其他入口**：通过分享链接（带作物与参数）或从计算历史选择记录，也会跳转到计算器并回填数据；从链接直接进计算器时同样会做免费次数校验。

### 3.3 价格计算器

**入口与头部**

- 从作物选择页点击作物、或从历史记录/分享链接回填后进入。  
- 头部：左侧返回按钮、中间作物名称、右侧分享按钮。点击分享时若未输入重量或重量无效，会提示「请先输入重量并选择突变」。

**输入项**

- **作物**：由选择页或链接/历史带入，不可在计算器内切换（需返回选择页）。  
- **重量**：数字输入，单位 kg，支持小数；取值范围为 (0, 作物极限重量]，界面会提示该作物的最小/最大重量。  
- **百分比**：可选，表示当前重量占该作物极限重量的百分比，与重量联动。  
- **生长速度**：可选填，表示「生长 1% 所需秒数」；不填时由「重量 × 作物生长速度」得到生长耗时。用于显示「预计生长时间」（如 x 分钟 / x 小时 x 分）。  
- **突变**：多组多选，见下。

**突变分组与规则**

- **品质突变**（互斥，只能选一个）：星空、流光、水晶、金、银。  
- **异形突变**：薯片、方形、糖葫芦、连体、黄瓜蛇、万圣夜、香蕉猴、笑日葵；仅当作物支持对应异形时才显示该选项。  
- **月球突变**（仅月球作物显示）：流火、日蚀、暗雾、陨石。  
- **常见突变**：瓷化、亮晶晶、落雷、冰冻、金币、颤栗、覆雪、潮湿、迷雾、生机。  
- **罕见突变**：霓虹、星环、血月、彩虹、荧光。  
- **往期突变**：极光、幽魂、惊魂夜。  
- **中间状态突变**：陶化、沙尘、灼热、结霜（及月球时的太阳耀斑）；不直接勾选，由下方合成规则自动参与计算。  
- **合成规则**（自动）：  
  - 沙尘 + 潮湿 → 陶化  
  - 陶化 + 灼热 → 瓷化  
  - 潮湿 + 结霜 → 冰冻  
  - 太阳耀斑 + 灼热 → 流火（仅月球作物）

**计算公式（产品理解）**

- 价格 = 基础系数 × 先天突变倍数 × (重量^1.5) × (天气突变总倍数 + 1) × 异形突变倍数。  
- 先天突变：在选中的品质突变中取最大倍数。  
- 天气突变：除先天、异形外的突变，倍数相加后再 +1。  
- 异形突变：单独乘区，取选中异形中的最大倍数。

**输出与模式**

- **按重量算价**：输入重量和突变后，实时显示计算价格；价格按「元/万/亿」格式化展示（如 2.07亿、1.5万、888）。  
- **按价格反推重量**：用户可点击价格区域切换为「输入目标价格」模式，支持带单位输入（如 2亿、1.5万），计算器反推重量并限制在 [0, 作物极限重量] 内。

**操作按钮**

- **反馈**：打开价格反馈弹窗，可标记本次计算结果是否准确，不准确时可选填实际价格并提交。  
- **保存**：将当前作物、重量、突变与计算价格写入本地计算历史（最多保留 20 条，按时间倒序）。  
- **分享**：生成带作物与参数的链接；复制时可附带一段随机文案（含品质/异形或作物名 + 链接），便于分享到社交场景。

### 3.4 计算历史

- **存储**：仅存于本机，最多 20 条，按时间倒序。  
- **内容**：作物名、重量、突变列表、计算价格、时间戳。  
- **入口**：个人中心内「计算历史」进入历史列表层，可左右滑动或通过动效与选择页/计算器切换。  
- **交互**：点击某条记录后，用该条数据回填到计算器并进入计算器页；若免费次数已用尽且非会员，会先弹窗引导开通会员或邀请，无法回填。  
- **删除**：在历史列表内可单条删除，删除后不可恢复。

### 3.5 分享

- **生成**：在计算器内输入有效重量并选择突变后，点击头部分享按钮，生成包含作物索引、重量、百分比、突变等信息的 URL 参数。  
- **复制**：分享弹窗内可复制链接；也可一键复制「文案 + 链接」，文案根据是否有异形突变从多套模板中随机选取。  
- **打开**：他人打开带参数的链接时，若已登录且免费次数或会员允许，会直接进入计算器并恢复作物、重量与突变；若未登录或次数不足，按现有规则跳转登录或展示次数用尽弹窗。

### 3.6 价格反馈

- **入口**：计算器内「反馈」按钮，打开价格反馈弹窗。  
- **内容**：  
  - 询问「计算结果是否准确？」  
  - 选择「准确」：直接提交（作物名、重量、突变、计算价格、标记为准确）。  
  - 选择「不准确」：可选填实际价格（支持与界面一致的元/万/亿格式），再提交。  
- **用途**：数据用于反馈数据页的基数校准与准确率/误差分析，不用于对外展示用户身份。

### 3.7 反馈数据页

- **入口**：仅通过 URL 参数进入（如 ?page=feedback），产品内无显眼入口，供运营或高级用户使用。  
- **权限**：需已登录，与主应用同账号体系。  
- **选择作物**：可按作物筛选反馈列表；支持「清除筛选」查看全部。  
- **单作物视图**：  
  - 展示该作物的默认基数、反馈条数、准确/不准确数量。  
  - 可手动输入「调整后基数」，或点击「自动计算最优基数」根据反馈样本计算使误差和更小的基数。  
  - 展示默认基数与调整后的平均误差、准确率等统计；可重置回默认基数。  
  - 列表展示单条反馈（作物、重量、突变、计算价、实际价、是否准确等），支持单条删除（需确认，不可恢复）。  
- **一键计算全部**：不筛选或筛选后均可点击「一键计算全部最优基数」，对每个有反馈数据的作物计算最优基数，并展示列表：作物名、默认基数、最优基数、样本数、默认/最优准确率、平均误差及变化等；支持按准确率排序、复制或导出结果。  

（本页不描述具体算法与接口，仅说明产品能力。）

### 3.8 会员与计费

**档位与价格（展示用）**

- 日卡 0.19 元、周卡 0.99 元、月卡 1.99 元（推荐）、季卡 4.99 元、年卡 9.99 元、三年 19.9 元。

**免费次数**

- 未开通会员时，每日可免费进入计算器 1 次（按北京时间「今日」统计）。  
- 进入计算器指：从选择页点击作物进入、从历史记录选择一条进入、或通过分享链接直接打开计算器；每种情况占用 1 次。  
- 用尽后再次尝试进入时弹窗提示「今日免费次数已用完」，引导开通会员或邀请好友，并提供「开通会员」与「邀请好友」按钮。

**会员权益**

- 开通会员后，进入计算器不限次数。  
- 会员状态以服务端为准，换设备登录后仍按同一账号的会员到期时间判断。

**开通与续费流程**

- 用户通过产品内「开通会员」/「续费会员」进入会员弹窗。  
- 弹窗内展示：当前是否已开通、到期日与剩余天数（已开通时）；开通/续费流程说明；各档位与价格；「前往购买会员」跳转至购买页。  
- 购买完成后，用户在弹窗内输入「CF-」开头的激活码并点击「激活」或「续费」。  
- 续费逻辑：在当前到期日之后顺延对应天数；若已过期则从当前时间起算。

### 3.9 邀请有礼

- **入口**：个人中心内「邀请有礼」；首次进入作物选择页时自动弹出一次，关闭后仅能从个人中心再次打开。  
- **展示**：  
  - 用户专属邀请码，可一键复制。  
  - 规则说明：好友注册时填写邀请码绑定关系；好友**首次充值任意会员档位**后，邀请人自动获得对应会员天数。  
  - 我的邀请统计：已邀请人数、已获得奖励天数。  
- **用途**：拉新与会员转化，同时给老用户会员天数激励。

### 3.10 排行榜

- **入口**：个人中心内「排行榜」。  
- **两个榜单**：  
  - **会员时长**：按当前剩余会员天数从高到低排序，展示头像、昵称（或「神秘用户」）、剩余天数；当前用户高亮并带「我」标识。  
  - **今日查询**：按当日查询次数从高到低排序，展示头像、昵称、今日查询次数；同样支持「我」标识。  
- **展示**：榜单以弹窗形式展示，支持 Tab 切换两个榜单；无数据时有相应空状态提示。

### 3.11 个人中心

- **入口**：作物选择页「个人中心」按钮，从侧边滑出抽屉。  
- **用户信息**：头像（多款可选）、昵称或邮箱、「会员用户/免费用户」标签；「修改个人信息」打开昵称与头像编辑弹窗。  
- **昵称与头像**：  
  - 昵称：最多 12 个字符、最多 6 个汉字，仅允许中文、字母、数字。  
  - 头像：在固定数量头像中选择其一保存。  
- **会员**：展示当前是否会员、到期日与剩余天数（若已开通）；按钮「开通会员」或「续费会员」打开会员弹窗。  
- **功能入口**：计算历史、邀请有礼、排行榜。  
- **帮助与关于**：联系我们、免责声明、用户隐私、更新日志（展示最新版本号）。  
- **退出登录**：退出后刷新页面，回到登录页。

### 3.12 联系我们

- **入口**：个人中心「联系我们」。  
- **内容**：  
  - 商业合作 / 技术贡献：联系作者（展示联系方式如二维码）。  
  - 加入用户群 / 使用教程：联系助理（展示联系方式如二维码）。  
  - 我要反馈：跳转到文字反馈表单，用户填写内容提交，用于产品改进与客服。

### 3.13 免责声明与用户隐私

- **免责声明**：说明收费与合规、版权与素材（作物等素材来源于《蛋仔派对》，版权归网易等）、非官方与独立性、数据免责与风险自担、开发者责任限制、服务变更与终止、用户同意等。  
- **用户隐私**：说明信息收集范围、使用目的、存储与安全、第三方与共享、用户权利、条款更新等。  
- **展示**：登录页与个人中心均可打开对应弹窗阅读；登录/注册前需勾选同意后使用。

### 3.14 更新日志

- **入口**：个人中心「更新日志」。  
- **内容**：按版本与日期列出版本号及该版本的更新项列表，便于用户了解功能与修复。

### 3.15 页脚与备案

- **页脚**：主内容区下方仅展示备案信息（如 ICP 备案号、公安备案号）及必要外链。  
- **素材与版权**：页脚或免责声明中注明作物等图片素材来源及版权归属，本产品不主张素材权利。

---

## 四、数据与规则说明（产品侧）

### 4.1 作物与突变

- **作物**：分「普通」与「月球」两类；每种作物有名称、售价系数、极限重量、生长速度等；部分作物拥有异形突变（如土豆-薯片、西瓜-方形等）。  
- **突变**：每种突变有名称、颜色分类、价格倍数；品质突变互斥，异形突变仅对支持该异形的作物显示；合成规则见 3.3。

### 4.2 计算历史

- 仅保存在用户本机，最多 20 条，按时间倒序；删除后不可恢复。  
- 每条包含：作物名、重量、突变列表、计算价格、时间戳。

### 4.3 价格反馈

- 用户提交的反馈包含：作物名、重量、突变、计算价格、是否准确、实际价格（选填）。  
- 用于反馈数据页的统计与最优基数计算，不对外展示用户身份。

### 4.4 会员与免费次数

- 免费次数：按「每日」统计，每日 1 次，以北京时间为准。  
- 会员：以服务端返回的到期时间判断是否在有效期内；激活码续费在原有到期日上顺延，过期则从当前时间起算。

### 4.5 邀请关系与奖励

- 好友在注册时填写邀请码即绑定邀请关系。  
- 好友首次充值任意会员档位后，邀请人获得对应会员天数奖励；具体天数与档位对应关系以产品内说明为准。

---

## 五、非功能需求（产品侧）

### 5.1 体验

- 首屏在登录态检查后尽快展示选择页或登录页。  
- 计算过程即时反馈，无需等待网络。  
- 历史、分享在本地或 URL 内完成，不依赖额外加载即可使用。

### 5.2 兼容与适配

- 支持主流现代浏览器。  
- 布局适配移动端与桌面端，关键操作在触屏与键鼠下均可完成。

### 5.3 安全与合规

- 会员与免费次数由服务端校验，防止前端篡改。  
- 仅 fknc.top（及 www）正常使用产品，其他域名展示迁移提示。  
- 登录前必须同意免责声明与用户隐私，合规信息在页脚与弹窗中可查。

---

## 六、术语与缩写

| 术语     | 含义 |
|----------|------|
| 疯狂农场 | 《蛋仔派对》内玩法名称。 |
| 作物     | 游戏内可种植作物，对应名称、系数、极限重量、生长速度等。 |
| 突变     | 天气/品质/异形等状态，影响价格倍数。 |
| 基数     | 作物售价系数，用于价格公式。 |
| 最优基数 | 根据反馈数据拟合得到的、使误差更小的系数（反馈数据页中使用）。 |
| 会员     | 已激活且在有效期内的用户，进入计算器不限次数。 |
| 免费次数 | 未开通会员时，每日可进入计算器的次数（当前为 1 次/日，按北京时间）。 |
| 邀请有礼 | 邀请好友注册并绑定邀请码，好友首充后邀请人获得会员天数的活动。 |

---

*本文档基于当前产品梳理，仅描述产品细节与用户侧规则，不涉及技术实现；若与线上行为不一致，以线上产品为准，并建议同步更新本文档。*
